import { useLocation } from "react-router-dom";
import { useState, useEffect } from "react";

import "./Result.css";
import Navbar from "../Navbar/Navbar";
import Table from "../Table/Table";

const Result = () => {
  const location = useLocation();
  const [videoResult, setVideoResult] = useState(null);
  const [earnings, setEarnings] = useState(null);

  useEffect(() => {
    if (location.state) {
      setVideoResult(location.state.videoResult);
      setEarnings(location.state.earnings);
    }
  }, [location.state]);

  console.log("VideoData:", videoResult);
  const dateString = videoResult && videoResult.items[0].snippet.publishedAt;

  const formatDate = (dateString) => {
    const options = { year: "numeric", month: "long", day: "numeric" };
    const formattedDate = new Date(dateString).toLocaleDateString(
      undefined,
      options
    );
    return formattedDate;
  };

  const formattedDate = formatDate(dateString);
  console.log(formattedDate);
  return (
    <div className="result">
      <Navbar />
      <div className="hero">
        <div className="hero1">
          <h4>
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g id="mdi:prize">
                <path
                  id="Vector"
                  d="M9 10C9.01036 9.20758 9.32976 8.45052 9.89014 7.89014C10.4505 7.32976 11.2076 7.01037 12 7.00001C12.7924 7.01037 13.5495 7.32976 14.1099 7.89014C14.6702 8.45052 14.9896 9.20758 15 10C14.9896 10.7924 14.6702 11.5495 14.1099 12.1099C13.5495 12.6702 12.7924 12.9896 12 13C11.2076 12.9896 10.4505 12.6702 9.89014 12.1099C9.32976 11.5495 9.01036 10.7924 9 10ZM12 19L16 20V16.92C14.7937 17.6465 13.408 18.0206 12 18C10.592 18.0206 9.20632 17.6465 8 16.92V20M12 4.00001C11.212 3.98563 10.4293 4.13257 9.70017 4.4318C8.97102 4.73102 8.31076 5.17622 7.76 5.74001C7.19011 6.29137 6.73977 6.95411 6.43699 7.68698C6.13421 8.41985 5.98546 9.20718 6 10C5.98958 10.7878 6.14033 11.5694 6.44299 12.2968C6.74565 13.0243 7.19383 13.6821 7.76 14.23C8.3082 14.7992 8.96729 15.25 9.69657 15.5544C10.4258 15.8588 11.2098 16.0105 12 16C12.7902 16.0105 13.5742 15.8588 14.3034 15.5544C15.0327 15.25 15.6918 14.7992 16.24 14.23C16.8062 13.6821 17.2543 13.0243 17.557 12.2968C17.8597 11.5694 18.0104 10.7878 18 10C18.0145 9.20718 17.8658 8.41985 17.563 7.68698C17.2602 6.95411 16.8099 6.29137 16.24 5.74001C15.6892 5.17622 15.029 4.73102 14.2998 4.4318C13.5707 4.13257 12.788 3.98563 12 4.00001ZM20 10C19.9787 10.9599 19.7857 11.9082 19.43 12.8C19.1096 13.7074 18.6248 14.5481 18 15.28V23L12 21L6 23V15.28C4.70569 13.8265 3.9935 11.9463 4 10C3.98237 8.95059 4.18004 7.9087 4.58078 6.93865C4.98153 5.96861 5.57685 5.091 6.33 4.36001C7.0637 3.6001 7.94536 2.99864 8.92056 2.59274C9.89576 2.18683 10.9438 1.98511 12 2.00001C13.0562 1.98511 14.1042 2.18683 15.0794 2.59274C16.0546 2.99864 16.9363 3.6001 17.67 4.36001C18.4231 5.091 19.0185 5.96861 19.4192 6.93865C19.82 7.9087 20.0176 8.95059 20 10Z"
                  fill="white"
                />
              </g>
            </svg>
            Top Earner video
          </h4>
          <img
            src={
              videoResult &&
              videoResult.items[0].snippet.thumbnails.standard.url
            }
            alt=""
          />
          <span>{`Uploaded on - ${formattedDate}`}</span>
        </div>
        <div className="hero2">
          <h3>{videoResult && videoResult.items[0].snippet.localized.title}</h3>
          <span>
            <svg
              width="19"
              height="19"
              viewBox="0 0 24 25"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g id="mdi:eye">
                <path
                  id="Vector"
                  d="M12 9.5C11.2044 9.5 10.4413 9.81607 9.87868 10.3787C9.31607 10.9413 9 11.7044 9 12.5C9 13.2956 9.31607 14.0587 9.87868 14.6213C10.4413 15.1839 11.2044 15.5 12 15.5C12.7956 15.5 13.5587 15.1839 14.1213 14.6213C14.6839 14.0587 15 13.2956 15 12.5C15 11.7044 14.6839 10.9413 14.1213 10.3787C13.5587 9.81607 12.7956 9.5 12 9.5ZM12 17.5C10.6739 17.5 9.40215 16.9732 8.46447 16.0355C7.52678 15.0979 7 13.8261 7 12.5C7 11.1739 7.52678 9.90215 8.46447 8.96447C9.40215 8.02678 10.6739 7.5 12 7.5C13.3261 7.5 14.5979 8.02678 15.5355 8.96447C16.4732 9.90215 17 11.1739 17 12.5C17 13.8261 16.4732 15.0979 15.5355 16.0355C14.5979 16.9732 13.3261 17.5 12 17.5ZM12 5C7 5 2.73 8.11 1 12.5C2.73 16.89 7 20 12 20C17 20 21.27 16.89 23 12.5C21.27 8.11 17 5 12 5Z"
                  fill="white"
                  fillOpacity="1"
                />
              </g>
            </svg>
            {videoResult && videoResult.items[0].statistics.viewCount}
          </span>
          <span>
            <svg
              width="19"
              height="19"
              viewBox="0 0 24 25"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g id="material-symbols:thumb-up">
                <path
                  id="Vector"
                  d="M18 21.5H8V8.5L15 1.5L16.25 2.75C16.3667 2.86667 16.4627 3.025 16.538 3.225C16.6133 3.425 16.6507 3.61667 16.65 3.8V4.15L15.55 8.5H21C21.5333 8.5 22 8.7 22.4 9.1C22.8 9.5 23 9.96667 23 10.5V12.5C23 12.6167 22.9877 12.7417 22.963 12.875C22.9383 13.0083 22.9007 13.1333 22.85 13.25L19.85 20.3C19.7 20.6333 19.45 20.9167 19.1 21.15C18.75 21.3833 18.3833 21.5 18 21.5ZM6 8.5V21.5H2V8.5H6Z"
                  fill="white"
                  fillOpacity="1"
                />
              </g>
            </svg>
            {videoResult && videoResult.items[0].statistics.likeCount}
          </span>
          <span>
            <svg
              width="19"
              height="19"
              viewBox="0 0 24 25"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g id="mdi:comment">
                <path
                  id="Vector"
                  d="M9 22.5C8.73478 22.5 8.48043 22.3946 8.29289 22.2071C8.10536 22.0196 8 21.7652 8 21.5V18.5H4C3.46957 18.5 2.96086 18.2893 2.58579 17.9142C2.21071 17.5391 2 17.0304 2 16.5V4.5C2 3.96957 2.21071 3.46086 2.58579 3.08579C2.96086 2.71071 3.46957 2.5 4 2.5H20C20.5304 2.5 21.0391 2.71071 21.4142 3.08579C21.7893 3.46086 22 3.96957 22 4.5V16.5C22 17.0304 21.7893 17.5391 21.4142 17.9142C21.0391 18.2893 20.5304 18.5 20 18.5H13.9L10.2 22.21C10 22.4 9.75 22.5 9.5 22.5H9Z"
                  fill="white"
                  fillOpacity="1"
                />
              </g>
            </svg>
            {videoResult && videoResult.items[0].statistics.commentCount}
          </span>
        </div>
        <div className="hero3">
          <h2>
            <svg
              width="22"
              height="32"
              viewBox="0 0 22 32"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g id="fa:rupee">
                <path
                  id="Vector"
                  d="M20.4091 7.77273V10.0909C20.4091 10.303 20.3409 10.4773 20.2045 10.6136C20.0682 10.75 19.8939 10.8182 19.6818 10.8182H15.8636C15.5152 13 14.5379 14.7727 12.9318 16.1364C11.3258 17.5 9.23485 18.3333 6.65909 18.6364C9.18939 21.3333 12.6667 25.3939 17.0909 30.8182C17.303 31.0606 17.3333 31.3182 17.1818 31.5909C17.0606 31.8636 16.8409 32 16.5227 32H12.0909C11.8485 32 11.6591 31.9091 11.5227 31.7273C6.88636 26.1667 3.11364 21.8409 0.204545 18.75C0.0681818 18.6136 0 18.447 0 18.25V15.3636C0 15.1667 0.0719697 14.9962 0.215909 14.8523C0.359848 14.7083 0.530303 14.6364 0.727273 14.6364H3.27273C5.27273 14.6364 6.88258 14.3106 8.10227 13.6591C9.32197 13.0076 10.0985 12.0606 10.4318 10.8182H0.727273C0.515152 10.8182 0.340909 10.75 0.204545 10.6136C0.0681818 10.4773 0 10.303 0 10.0909V7.77273C0 7.56061 0.0681818 7.38636 0.204545 7.25C0.340909 7.11364 0.515152 7.04545 0.727273 7.04545H10.1136C9.25 5.33333 7.2197 4.47727 4.02273 4.47727H0.727273C0.530303 4.47727 0.359848 4.4053 0.215909 4.26136C0.0719697 4.11742 0 3.94697 0 3.75V0.727273C0 0.515152 0.0681818 0.340909 0.204545 0.204545C0.340909 0.0681818 0.515152 0 0.727273 0H19.6364C19.8485 0 20.0227 0.0681818 20.1591 0.204545C20.2955 0.340909 20.3636 0.515152 20.3636 0.727273V3.04545C20.3636 3.25758 20.2955 3.43182 20.1591 3.56818C20.0227 3.70455 19.8485 3.77273 19.6364 3.77273H14.3409C15.053 4.69697 15.5379 5.78788 15.7955 7.04545H19.6818C19.8939 7.04545 20.0682 7.11364 20.2045 7.25C20.3409 7.38636 20.4091 7.56061 20.4091 7.77273Z"
                  fill="white"
                />
              </g>
            </svg>
            {earnings}
          </h2>
          <button>Check How ?</button>
        </div>
      </div>
      <Table />
    </div>
  );
};

export default Result;
